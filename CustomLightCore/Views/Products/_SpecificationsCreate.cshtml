@model CustomLightCore.ViewModels.Products.ProductViewModel

@if (Model.ProductType != null)
{

	<table class="table table-bordered table-striped table-hover sort_table">
		<thead>
			<tr>
				@foreach (var specificationTitle in Model.ProductType.SpecificationTitles)
				{
					<th>@specificationTitle.Name</th>
				}
				<th>Цена</th>
			</tr>
		</thead>
		<tbody>
			@{int counter = 0;
				@foreach (var specification in Model.Specifications)
				{
					<tr>
						@foreach (var specificationValue in specification.SpecificationValues)
						{

							<td>@Html.EditorFor(sp => sp.Specifications[counter].SpecificationValues)</td>
					}
						<td>@Html.EditorFor(sp => sp.Specifications[counter].Price)</td>
						<td><i class="fa fa-times remove-specification" id="remove-specification-@counter" aria-hidden="true"></i></td>
						@(counter = counter +1);
					</tr>
				}
			}
		</tbody>
	</table>

				}

<script>
	$(".remove-specification").click(function () {
		var form = $('form');
		var specificationIndex = parseInt(this.id.replace("remove-specification-", ""));
		$.ajax({
			type: "POST",
			url: "/Products/RemoveSpecification",
			data: form.serialize() + '&specificationIndex=' + specificationIndex,
			success: function (html) {
				//console.log(html);
				$('#specifications').html(html);
			},
			error: function (msg) {
				console.log(msg);
			}
		});
	});
</script>